
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="..">
      
      
        <link rel="next" href="../post-install/">
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.3, mkdocs-material-9.1.17">
    
    
      
        <title>Barebones - Archmoured</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.26e3688c.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#barebones" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Archmoured" class="md-header__button md-logo" aria-label="Archmoured" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Archmoured
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Barebones
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Archmoured" class="md-nav__button md-logo" aria-label="Archmoured" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Archmoured
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Pre-Install
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Barebones
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Barebones
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    Installation
  </a>
  
    <nav class="md-nav" aria-label="Installation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mirrors-selection" class="md-nav__link">
    Mirrors selection
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#essential-packages-installation" class="md-nav__link">
    Essential packages installation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#system-configuration" class="md-nav__link">
    System configuration
  </a>
  
    <nav class="md-nav" aria-label="System configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fstab" class="md-nav__link">
    Fstab
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#chroot" class="md-nav__link">
    Chroot
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#time-zone" class="md-nav__link">
    TIme-zone
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#localization" class="md-nav__link">
    Localization
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optional-persistent-keyboard-layour" class="md-nav__link">
    (Optional) Persistent keyboard layour
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#network-configuration" class="md-nav__link">
    Network configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#initramfs" class="md-nav__link">
    Initramfs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#password-creation" class="md-nav__link">
    Password creation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#user-creation" class="md-nav__link">
    User creation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bootloader" class="md-nav__link">
    Bootloader
  </a>
  
    <nav class="md-nav" aria-label="Bootloader">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#systemd-boot-as-bootloader" class="md-nav__link">
    Systemd-boot as bootloader
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reboot" class="md-nav__link">
    Reboot
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../post-install/" class="md-nav__link">
        Post-Install
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../about/" class="md-nav__link">
        About
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    Installation
  </a>
  
    <nav class="md-nav" aria-label="Installation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mirrors-selection" class="md-nav__link">
    Mirrors selection
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#essential-packages-installation" class="md-nav__link">
    Essential packages installation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#system-configuration" class="md-nav__link">
    System configuration
  </a>
  
    <nav class="md-nav" aria-label="System configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fstab" class="md-nav__link">
    Fstab
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#chroot" class="md-nav__link">
    Chroot
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#time-zone" class="md-nav__link">
    TIme-zone
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#localization" class="md-nav__link">
    Localization
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optional-persistent-keyboard-layour" class="md-nav__link">
    (Optional) Persistent keyboard layour
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#network-configuration" class="md-nav__link">
    Network configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#initramfs" class="md-nav__link">
    Initramfs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#password-creation" class="md-nav__link">
    Password creation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#user-creation" class="md-nav__link">
    User creation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bootloader" class="md-nav__link">
    Bootloader
  </a>
  
    <nav class="md-nav" aria-label="Bootloader">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#systemd-boot-as-bootloader" class="md-nav__link">
    Systemd-boot as bootloader
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reboot" class="md-nav__link">
    Reboot
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="barebones">Barebones</h1>
<h2 id="installation">Installation</h2>
<h3 id="mirrors-selection">Mirrors selection</h3>
<p>Packages are downloaded from <a href="https://wiki.archlinux.org/title/Mirrors">mirror servers</a>.
<a href="https://wiki.archlinux.org/title/Reflector">Reflector</a> updates the mirror list by 20 most 
recently synchronized HTTPS mirrors and sorting them by download rate after connecting to the
internet on the live system.</p>
<p>The higher a mirror is placed in the list, the more priority it is given when downloading a package.
Usually, the one generated on the live system is fine. If not, it may be <a href="https://wiki.archlinux.org/title/Help:Reading#Append,_add,_create,_edit">edited</a>.</p>
<h3 id="essential-packages-installation">Essential packages installation</h3>
<p><a href="https://wiki.archlinux.org/title/Pacstrap">Pacstrap</a> is designed to create a new system installation from scratch.
It is used to install specified packages into a given directory after setting up the mountpoints defined before
(specifically into the root partition).</p>
<p><strong>Optional</strong>: <code>base-devel</code> , <code>vim</code>, <code>intel-ucode</code>, <code>amd-ucode</code></p>
<pre><code>pacstrap /mnt base base-devel linux linux-firmware btrfs-progs vim intel-ucode
</code></pre>
<h2 id="system-configuration">System configuration</h2>
<h3 id="fstab">Fstab</h3>
<p>The <a href="https://wiki.archlinux.org/title/Fstab">fstab</a> file can be used to define how disk partitions, various other block 
devices, or remote file systems should be mounted into the file system. An fstab file is generated with:</p>
<pre><code>genfstab -U /mnt &gt;&gt; /mnt/etc/fstab
</code></pre>
<p><img alt="Genfstab.png" src="../img/Genfstab.png" /></p>
<h3 id="chroot">Chroot</h3>
<p>A chroot is an operation that changes the apparent root directory for the current running process and their children.
The following command changes root into the new system:</p>
<pre><code>arch-chroot /mnt/
</code></pre>
<h3 id="time-zone">TIme-zone</h3>
<p>By running the following command, an <code>/etc/localtime</code> symlink that points to a zoneinfo is created. If the user's
time zone name is unknown, it is recommended to play around by looking at the zoneinfo directory content (e.g. 
<code>ls /usr/share/zoneinfo/</code>) to see which option is best suited. Replacing Region and City is necessary:</p>
<pre><code>ln -sf /usr/share/zoneinfo/Region/City /etc/localtime
</code></pre>
<p><a href="https://man.archlinux.org/man/hwclock.8">Hwclock</a> is an administration tool for the time clocks. The following command
sets the Hardware Clock from the System Clock and updates the timestamps found in /etc/adjtime:</p>
<pre><code>hwclock --systohc
</code></pre>
<h3 id="localization">Localization</h3>
<p>To make use of the english language in the system, <code>en_US.UTF-8 UTF-8</code>  found in <code>/etc/locale.gen</code> must be uncommented.</p>
<pre><code>vim /etc/locale.gen
</code></pre>
<p>By using <a href="https://man.archlinux.org/man/echo.1">echo</a>, it is possible to edit/create a file without having to use a text editor. 
This command creates a locale.conf file and sets the LANG variable to the same uncommented above:</p>
<pre><code>echo LANG=en_US.UTF-8 &gt; /etc/locale.conf
</code></pre>
<p>The locales are generated by running:</p>
<pre><code>locale-gen
</code></pre>
<p><img alt="Localization.png" src="../img/Localization.png" /></p>
<h3 id="optional-persistent-keyboard-layour">(Optional) Persistent keyboard layour</h3>
<pre><code>echo KEYMAP=la-latin1 &gt; /etc/vconsole.conf
</code></pre>
<h3 id="network-configuration">Network configuration</h3>
<pre><code>echo myhost &gt; /etc/hostname
</code></pre>
<pre><code>vim /etc/hosts
</code></pre>
<p><img alt="Etc_hosts.png" src="../img/Etc_hosts.png" /></p>
<h3 id="initramfs">Initramfs</h3>
<pre><code>vim /etc/mkinitcpio.conf
</code></pre>
<ul>
<li>
<p>base: this hook provides crucial runtime necessities for booting.</p>
</li>
<li>
<p>udev: adds the udev daemon to the initramfs, allowing for dynamic loading of modules and reliable detection of 
the root device via tags (UUID).</p>
</li>
<li>
<p>systemd: this install a basic systemd setup in your initramfs, and is meant to
replace the 'base', 'usr', 'udev' and 'resume' hooks. Other hooks with runtime
components will need to be ported, and will not work as intended. You also may
wish to still include the 'base' hook (before this hook) to ensure that a
rescue shell exists on your initramfs.</p>
</li>
<li>
<p>autodetect: This hook shrinks your initramfs to a smaller size by autodetecting the needed
modules.</p>
</li>
<li>
<p>keyboard: This hook loads the necessary modules for keyboard devices.
modconf: This hook installs modprobe configuration files from /etc/modprobe.d and
/usr/lib/modprobe.d.</p>
</li>
<li>
<p>block: This hook loads the necessary modules for most block devices using pata, sata,
scsi, firewire, usb, or mmc.</p>
</li>
<li>
<p>sd-encrypt: This hook allows for an encrypted root device with systemd initramfs.
filesystems: This hook adds filesystems modules to the image.</p>
</li>
</ul>
<pre><code>mkinitcpio -P
</code></pre>
<p><img alt="Mkinitcpio_allpresets.png" src="../img/Mkinitcpio_allpresets.png" /></p>
<h3 id="password-creation">Password creation</h3>
<pre><code>passwd
</code></pre>
<h3 id="user-creation">User creation</h3>
<pre><code>useradd -mG wheel username
</code></pre>
<pre><code> EDITOR=vim visudo
</code></pre>
<pre><code>%wheel ALL=(ALL) ALL
</code></pre>
<pre><code>passwd username
</code></pre>
<p><img alt="User_creation.png" src="../img/User_creation.png" /></p>
<pre><code>pacman -S linux-headers networkmanager dialog wpa_supplicant mtools dosfstools git xdg-utils xdg-user-dirs
</code></pre>
<pre><code>systemctl enable NetworkManager
</code></pre>
<h2 id="bootloader">Bootloader</h2>
<h3 id="systemd-boot-as-bootloader">Systemd-boot as bootloader</h3>
<pre><code> bootctl --path=/boot install
</code></pre>
<pre><code> echo blkid -s UUID -o value /dev/sda2 &gt;&gt; /boot/loader/entries/arch.conf
</code></pre>
<pre><code>vim boot/loader/entries/arch.conf 
</code></pre>
<pre><code>vim /boot/loader/loader.conf
</code></pre>
<pre><code>exit
</code></pre>
<pre><code>umount -a
</code></pre>
<h2 id="reboot">Reboot</h2>
<pre><code>reboot
</code></pre>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.b425cdc4.min.js"></script>
      
    
  </body>
</html>